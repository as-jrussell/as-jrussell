USE [tempdb]
GO
 
 /*

 https://sqlsunday.com/2013/08/11/shrinking-tempdb-without-restarting-sql-server/

 */


 sp_helpdb 'TempDB'

 use tempdb

	DBCC SHRINKFILE('templog',0)
	DBCC SHRINKFILE('tempdev',0)
	DBCC SHRINKFILE('temp2',0)
	DBCC SHRINKFILE('temp3',0)
	DBCC SHRINKFILE('temp4',0)
	DBCC SHRINKFILE('tempdev5',0)
	DBCC SHRINKFILE('tempdev6',0)
	DBCC SHRINKFILE('tempdev7',0)
	DBCC SHRINKFILE('tempdev8',0)
GO

	DBCC SHRINKFILE('templog',0)
	DBCC SHRINKFILE('tempdev',0)
	DBCC SHRINKFILE('temp2',0)
	DBCC SHRINKFILE('temp3',0)
	DBCC SHRINKFILE('temp4',0)
	DBCC SHRINKFILE('tempdev5',0)
	DBCC SHRINKFILE('tempdev6',0)
	DBCC SHRINKFILE('tempdev7',0)
	DBCC SHRINKFILE('tempdev8',0)
ALTER DATABASE TempDB MODIFY FILE (NAME = 'templog', SIZE = 2000MB);
ALTER DATABASE TempDB MODIFY FILE (NAME = 'tempdev', SIZE = 7000MB);
ALTER DATABASE TempDB MODIFY FILE (NAME = 'tempdev2', SIZE = 7000MB);
ALTER DATABASE TempDB MODIFY FILE (NAME = 'tempdev3', SIZE = 7000MB);
ALTER DATABASE TempDB MODIFY FILE (NAME = 'tempdev4', SIZE = 7000MB);
ALTER DATABASE TempDB MODIFY FILE (NAME = 'tempdev5', SIZE = 4000MB);
ALTER DATABASE TempDB MODIFY FILE (NAME = 'tempdev6', SIZE = 4000MB);
ALTER DATABASE TempDB MODIFY FILE (NAME = 'tempdev7', SIZE = 4000MB);
ALTER DATABASE TempDB MODIFY FILE (NAME = 'tempdev8', SIZE = 4000MB);
/*
 use tempdb
	DBCC FREEPROCCACHE
	DBCC DROPCLEANBUFFERS 
	DBCC FREESYSTEMCACHE ('ALL')
	DBCC FREESESSIONCACHE
	DBCC SHRINKFILE('templog',0)
	DBCC SHRINKFILE('tempdev',0)
	DBCC SHRINKFILE('tempdev2',0)
	DBCC SHRINKFILE('tempdev3',0)
	DBCC SHRINKFILE('tempdev4',0)
	DBCC SHRINKFILE('tempdev5',0)
	DBCC SHRINKFILE('tempdev6',0)
	DBCC SHRINKFILE('tempdev7',0)
	DBCC SHRINKFILE('tempdev8',0)


*/