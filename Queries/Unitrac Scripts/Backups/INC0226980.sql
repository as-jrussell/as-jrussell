USE [UniTrac]
GO 

--Loan Screen Information - LOAN/COLLATERAL/PROPERTY/OWNER/REQUIRED COVERAGE
SELECT C.FIELD_PROTECTION_XML.value( '(/FP/Field/@name)[1]', 'varchar(500)' ), 
C.FIELD_PROTECTION_XML.value( '(/FP/Field/Field/@name)[1]', 'varchar(500)' ), L.NUMBER_TX ,
        C.RETAIN_IN [Coll Retain] ,
        L.RETAIN_IN [Loan Retain] ,
        RC.DESCRIPTION_TX [RecordType] ,
        RCC.DESCRIPTION_TX [LoanStatus] ,
        RCD.DESCRIPTION_TX [CollateralStatus] ,
        C.ID [CID] ,
        L.ID [LID] ,
        C.LOAN_ID ,
        C.LOAN_BALANCE_NO ,
        C.LOAN_PERCENTAGE_NO ,
		C.UPDATE_DT, 
		C.FIELD_PROTECTION_XML
--INTO UniTracHDStorage..INC0226980_3
FROM    LOAN L
        INNER JOIN COLLATERAL C ON L.ID = C.LOAN_ID
        INNER JOIN PROPERTY P ON C.PROPERTY_ID = P.ID
        INNER JOIN REQUIRED_COVERAGE R ON P.ID = R.PROPERTY_ID
        INNER JOIN OWNER_LOAN_RELATE OL ON L.ID = OL.LOAN_ID
        INNER JOIN OWNER O ON OL.OWNER_ID = O.ID
        INNER JOIN OWNER_ADDRESS OA ON O.ADDRESS_ID = OA.ID
        INNER JOIN dbo.REF_CODE RC ON RC.CODE_CD = L.RECORD_TYPE_CD
                                      AND RC.DOMAIN_CD = 'RecordType'
        INNER JOIN dbo.REF_CODE RCC ON RCC.CODE_CD = L.STATUS_CD
                                       AND RCC.DOMAIN_CD = 'LoanStatus'
        INNER JOIN dbo.REF_CODE RCD ON RCD.CODE_CD = C.STATUS_CD
                                       AND RCD.DOMAIN_CD = 'CollateralStatus'
WHERE   L.LENDER_ID = '2282' AND  C.FIELD_PROTECTION_XML IS NOT NULL AND C.ID IN (SELECT * FROM #tmpD)
ORDER BY L.NUMBER_TX ASC




SELECT * FROM UniTracHDStorage..INC0226980_3
WHERE Number_tx ='9400340-151'


UPDATE dbo.COLLATERAL
SET FIELD_PROTECTION_XML = NULL, UPDATE_DT = GETDATE() ,
        LOCK_ID = LOCK_ID + 1 ,
        UPDATE_USER_TX = 'INC0226980'
--SELECT FIELD_PROTECTION_XML,* FROM dbo.COLLATERAL
WHERE ID IN (SELECT CID FROM UniTracHDStorage..INC0226980_3)  

UPDATE  C
SET     C.RETAIN_IN = D.[Coll Retain] ,
        C.UPDATE_DT = GETDATE() ,
        C.LOCK_ID = LOCK_ID + 1 ,
        C.UPDATE_USER_TX = 'INC0226980'
--SELECT RETAIN_IN, * 
FROM dbo.COLLATERAL C 
INNER JOIN UniTracHDStorage..INC0226980_2 D ON D.CID = C.ID
--SELECT RETAIN_IN, * FROM dbo.COLLATERAL
WHERE   ID IN ( 123092598 )
        --AND RETAIN_IN = 'N'
--ORDER BY ID ASC


UPDATE  C
SET     C.RETAIN_IN = D.[Loan Retain],
        C.UPDATE_DT = GETDATE() ,
        C.LOCK_ID = LOCK_ID + 1 ,
        C.UPDATE_USER_TX = 'INC0226980'
--SELECT RETAIN_IN, * 
FROM dbo.LOAN C 
INNER JOIN UniTracHDStorage..INC0226980_2 D ON D.LID = C.ID
--SELECT RETAIN_IN, * FROM dbo.LOAN
WHERE   ID IN ( 149031097 )
--ORDER BY ID ASC




UPDATE  dbo.COLLATERAL
SET     FIELD_PROTECTION_XML = '<FP>
  <Field name="CollateralCodeId" />
</FP>',
        UPDATE_DT = GETDATE() ,
        LOCK_ID = LOCK_ID + 1 ,
        UPDATE_USER_TX = 'INC0226980'
--SELECT FIELD_PROTECTION_XML,* FROM dbo.COLLATERAL
WHERE ID IN (SELECT * FROM #tmpC) OR 
ID  IN (SELECT * FROM #tmpD)
    
--27133


UPDATE  dbo.LOAN
SET     RETAIN_IN = 'Y' ,
        UPDATE_DT = GETDATE() ,
        LOCK_ID = LOCK_ID + 1 ,
        UPDATE_USER_TX = 'INC0226980'
--SELECT RETAIN_IN, * FROM dbo.LOAN
WHERE   ID IN ( SELECT  LID
                FROM    UniTracHDStorage..INC0226980_2 )
        AND RETAIN_IN = 'N'
--27212



--3095
--124084560

INSERT  INTO PROPERTY_CHANGE
        ( ENTITY_NAME_TX ,
          ENTITY_ID ,
          USER_TX ,
          ATTACHMENT_IN ,
          CREATE_DT ,
          AGENCY_ID ,
          DESCRIPTION_TX ,
          DETAILS_IN ,
          FORMATTED_IN ,
          LOCK_ID ,
          PARENT_NAME_TX ,
          PARENT_ID ,
          TRANS_STATUS_CD ,
          UTL_IN
        )
        SELECT DISTINCT
                'Allied.UniTrac.Collateral' ,
                C.ID ,
                'UNITRAC' ,
                'N' ,
                GETDATE() ,
                1 ,
                'Moved Retain from N to Y' ,
                'Y' ,
                'N' ,
                1 ,
                'Allied.UniTrac.Collateral' ,
                C.ID ,
                'PEND' ,
                'N'
--SELECT COUNT(*)
        FROM    REQUIRED_COVERAGE RC
                INNER JOIN PROPERTY P ON RC.PROPERTY_ID = P.ID
                INNER JOIN COLLATERAL C ON P.ID = C.PROPERTY_ID
                INNER JOIN LOAN L ON L.ID = C.LOAN_ID
        WHERE   C.ID IN ( SELECT    CID
                          FROM      UniTracHDStorage..INC0226980_2 )
                AND C.RETAIN_IN = 'N'
--3095



--124084560

INSERT  INTO PROPERTY_CHANGE
        ( ENTITY_NAME_TX ,
          ENTITY_ID ,
          USER_TX ,
          ATTACHMENT_IN ,
          CREATE_DT ,
          AGENCY_ID ,
          DESCRIPTION_TX ,
          DETAILS_IN ,
          FORMATTED_IN ,
          LOCK_ID ,
          PARENT_NAME_TX ,
          PARENT_ID ,
          TRANS_STATUS_CD ,
          UTL_IN
        )
        SELECT DISTINCT
                'Allied.UniTrac.Loan' ,
                L.ID ,
                'UNITRAC' ,
                'N' ,
                GETDATE() ,
                1 ,
                'Moved Retain from N to Y' ,
                'Y' ,
                'N' ,
                1 ,
                'Allied.UniTrac.Loan' ,
                L.ID ,
                'PEND' ,
                'N'
--SELECT COUNT(*)
        FROM    REQUIRED_COVERAGE RC
                INNER JOIN PROPERTY P ON RC.PROPERTY_ID = P.ID
                INNER JOIN COLLATERAL C ON P.ID = C.PROPERTY_ID
                INNER JOIN LOAN L ON L.ID = C.LOAN_ID
        WHERE   L.ID IN ( SELECT    LID
                          FROM      UniTracHDStorage..INC0226980_2 )
                AND L.RETAIN_IN = 'N'
--3095



SELECT P.TAB.value('.', 'nvarchar(max)') AS LCGCTId, C.ID
INTO #tmpLCGCTId
FROM dbo.COLLATERAL c 
INNER JOIN dbo.LOAN l ON l.ID = c.LOAN_ID
CROSS APPLY c.FIELD_PROTECTION_XML.nodes('/FP/Field/@name') AS P (TAB)
WHERE   L.LENDER_ID = '2282' AND C.FIELD_PROTECTION_XML IS NOT NULL

--DROP TABLE #tmpLCGCTId


SELECT P.TAB.value('.', 'nvarchar(max)') AS LCGCTId, C.ID
INTO #tmpLCGCTIb
FROM dbo.COLLATERAL c 
INNER JOIN dbo.LOAN l ON l.ID = c.LOAN_ID
CROSS APPLY c.FIELD_PROTECTION_XML.nodes('/FP/Field/@name') AS P (TAB)
WHERE   L.LENDER_ID = '2282' AND C.FIELD_PROTECTION_XML.value( '(/FP/Field/@name)[1]', 'varchar(500)' ) = 'CollateralCodeId'





SELECT TT.* INTO #tmpA
FROM #tmpLCGCTId TT
LEFT JOIN #tmpLCGCTIb TTT ON TTT.ID = TT.ID
WHERE TTT.ID IS NULL AND TT.LCGCTId = 'CollateralCodeId'
ORDER BY TT.ID 




SELECT TT.* INTO #tmpB
FROM #tmpLCGCTId TT
LEFT JOIN #tmpLCGCTIb TTT ON TTT.ID = TT.ID
WHERE TTT.ID IS NOT NULL AND TT.LCGCTId = 'CollateralCodeId'


SELECT DISTINCT #tmpA.ID 
INTO #TmpD FROM #tmpA
INNER JOIN #tmpB ON #tmpB.LCGCTId = #tmpA.LCGCTId



























 SELECT DISTINCT 'Allied.UniTrac.Collateral' , L.ID , 'UNITRAC' , 'N' , 
 GETDATE() ,  1 , 
 'Moved Retain from N to Y', 
 'Y' , 'N' , 1 ,  'Allied.UniTrac.Collateral' , L.ID , 'PEND' , 'N'
--SELECT *
FROM REQUIRED_COVERAGE RC 
INNER JOIN PROPERTY P ON RC.PROPERTY_ID = P.ID
INNER JOIN COLLATERAL C ON P.ID = C.PROPERTY_ID
INNER JOIN LOAN L ON L.ID = C.LOAN_ID
WHERE C.ID IN (SELECT ID FROM UniTracHDStorage..INC0226980)

DROP TABLE #tmp

SELECT  ID
INTO #tmp
FROM    dbo.PROPERTY_CHANGE
WHERE   ENTITY_NAME_TX = 'Allied.UniTrac.Collateral'
        AND ENTITY_ID IN ( '147063344', '147573048', '148983722', '148983729',
                           '148983731', '148983737', '148983747', '148983754',
                           '148983755', '148983757', '148983763', '148983764',
                           '148983771', '148988685', '148988984', '148989018',
                           '148989068', '148989210', '148989363', '148989450',
                           '148989469', '148989536', '148989614', '148989646',
                           '148989678', '148989958', '148990088', '148990219',
                           '148990244', '148990410', '148990475', '148990492',
                           '148990581', '148990634', '148990674', '148990756',
                           '148990952', '148991275', '148991316', '148991789',
                           '148991868', '148992072', '148992187', '148992459',
                           '148992504', '148992536', '148992849', '148992965',
                           '148993189', '148993226', '148993285', '148993382',
                           '148993469', '148993696', '148994023', '148994084',
                           '148994210', '148994371', '148994675', '148994794',
                           '148994824', '148995051', '148995067', '148995299',
                           '148995335', '148995585', '148995654', '148995717',
                           '148995801', '148995878', '148995951', '148995963',
                           '148995974', '148995976', '148995977', '148995984',
                           '148996004', '148996011', '148996021', '148996027',
                           '148996035', '148996041', '148996046', '148996048',
                           '148996052', '148996070', '148996077', '148996082',
                           '148996094', '148996101', '148996123', '148996136',
                           '148996139', '148996140', '148996142', '148996163',
                           '148996168', '148996192', '148996199', '148996203',
                           '148996204', '148996227', '148996228', '148996237',
                           '148996265', '148996273', '148996275', '148996305',
                           '148996308', '148996312', '148996314', '148996335',
                           '148996342', '148996344', '148996358', '148996367',
                           '148996371', '148996372', '148996379', '148996384',
                           '148996397', '148996419', '148996422', '148996424',
                           '148996441', '148996447', '148996450', '148996454',
                           '148996462', '148996470', '148996473', '148996497',
                           '148996503', '148996530', '148996533', '148996541',
                           '148996566', '148996575', '148996582', '148996606',
                           '148996612', '148996634', '148996641', '148996684',
                           '148996690', '148996694', '148996711', '148996732',
                           '148996738', '148996739', '148996743', '148996778',
                           '148996781', '148996790', '148996801', '148996807',
                           '148996819', '148996820', '148996825', '148996863',
                           '148996873', '148996876', '148996877', '148996886',
                           '148996897', '148996900', '148996913', '148996917',
                           '148996922', '148996923', '148996929', '148996937',
                           '148996945', '148996951', '148996957', '148996962',
                           '148996965', '148996974', '148996978', '148996987',
                           '148996988', '148996990', '148996991', '148996994',
                           '148997018', '148997032', '148997035', '148997045',
                           '148997046', '148997052', '148997061', '148997074',
                           '148997075', '148997079', '148997082', '148997098',
                           '148997103', '148997121', '148997122', '148997134',
                           '148997141', '148997149', '148997153', '148997157',
                           '148997162', '148997176', '148997178', '148997191',
                           '148997195', '148997210', '148997214', '148997225',
                           '148997252', '148997277', '148997289', '148997293',
                           '148997300', '148997305', '148997317', '148997327',
                           '148997330', '148997332', '148997334', '148997336',
                           '148997338', '148997344', '148997348', '148997352',
                           '148997354', '148997380', '148997390', '148997431',
                           '148997435', '148997437', '148997448', '148997453',
                           '148997479', '148997489', '148997496', '148997507',
                           '148997509', '148997516', '148997534', '148997544',
                           '148997547', '148997553', '148997556', '148997559',
                           '148997565', '148997579', '148997585', '148997597',
                           '148997603', '148997606', '148997612', '148997615',
                           '148997640', '148997647', '148997654', '148997655',
                           '148997657', '148997665', '148997666', '148997669',
                           '148997694', '148997695', '148997697', '148997699',
                           '148997701', '148997704', '148997729', '148997750',
                           '148997751', '148997772', '148997784', '148997786',
                           '148997791', '148997792', '148997803', '148997811',
                           '148997818', '148997825', '148997845', '148997851',
                           '148997852', '148997854', '148997863', '148997875',
                           '148997878', '148997884', '148997887', '148997894',
                           '148997899', '148997910', '148997912', '148997914',
                           '148997923', '148997930', '148997951', '148997957',
                           '148997967', '148997989', '148997991', '148998006',
                           '148998019', '148998023', '148998030', '148998034',
                           '148998038', '148998043', '148998044', '148998049',
                           '148998052', '148998069', '148998073', '148998074',
                           '148998092', '148998094', '148998102', '148998111',
                           '148998115', '148998117', '148998122', '148998395',
                           '148998484', '148998587', '148998743', '148999198',
                           '148999615', '148999700', '148999711', '148999742',
                           '148999805', '148999817', '148999824', '148999866',
                           '148999993', '149000020', '149000047', '149000240',
                           '149000335', '149000584', '149000626', '149000707',
                           '149000967', '149000989', '149001037', '149001820',
                           '149001882', '149001911', '149002353', '149002405',
                           '149002558', '149002639', '149002642', '149002723',
                           '149002760', '149002923', '149003017', '149003034',
                           '149003095', '149003233', '149003305', '149003355',
                           '149003507', '149003522', '149003578', '149003591',
                           '149003669', '149003924', '149003973', '149004008',
                           '149004102', '149004217', '149004239', '149004365',
                           '149004392', '149004411', '149004491', '149004508',
                           '149004542', '149004551', '149004572', '149004638',
                           '149004660', '149004711', '149004777', '149004895',
                           '149004915', '149005004', '149005035', '149005114',
                           '149005175', '149005227', '149005380', '149005431',
                           '149005581', '149005639', '149005717', '149005969',
                           '149006043', '149006131', '149006161', '149006332',
                           '149006465', '149006500', '149006514', '149006613',
                           '149006650', '149006708', '149006768', '149006781',
                           '149006793', '149006811', '149006885', '149006906',
                           '149007071', '149007176', '149007201', '149007216',
                           '149007467', '149007619', '149007627', '149007634',
                           '149007645', '149007653', '149007662', '149007670',
                           '149007685', '149007687', '149007699', '149007710',
                           '149007719', '149007732', '149007739', '149007742',
                           '149007748', '149007772', '149007820', '149007840',
                           '149007857', '149007943', '149008019', '149008066',
                           '149008080', '149008096', '149008100', '149008105',
                           '149008108', '149008126', '149008147', '149008156',
                           '149008168', '149008170', '149008184', '149008197',
                           '149008204', '149008205', '149008208', '149008211',
                           '149008213', '149008216', '149008243', '149008269',
                           '149008280', '149008288', '149008311', '149008320',
                           '149008325', '149008350', '149008361', '149008362',
                           '149008369', '149008419', '149008424', '149008428',
                           '149008482', '149008488', '149008491', '149008502',
                           '149008508', '149008509', '149008520', '149008537',
                           '149008552', '149008579', '149008618', '149008637',
                           '149008658', '149008676', '149008678', '149008686',
                           '149008706', '149008709', '149008744', '149008748',
                           '149008766', '149008772', '149008810', '149008817',
                           '149008843', '149008844', '149008862', '149008865',
                           '149008871', '149008881', '149008883', '149008884',
                           '149008887', '149008897', '149008901', '149008903',
                           '149008932', '149008937', '149008950', '149008954',
                           '149008964', '149008983', '149008999', '149009012',
                           '149009031', '149009036', '149009051', '149009052',
                           '149009068', '149009076', '149009081', '149009082',
                           '149009125', '149009137', '149009156', '149009164',
                           '149009166', '149009178', '149009188', '149009198',
                           '149009206', '149009209', '149009221', '149009230',
                           '149009244', '149009261', '149009263', '149009267',
                           '149009269', '149009274', '149009281', '149009287',
                           '149009298', '149009313', '149009318', '149009320',
                           '149009336', '149009360', '149009364', '149009373',
                           '149009380', '149009410', '149009414', '149009429',
                           '149009469', '149009476', '149009556', '149009567',
                           '149009619', '149009627', '149009631', '149009639',
                           '149009643', '149009648', '149009665', '149009693',
                           '149009707', '149009710', '149009726', '149009728',
                           '149009734', '149009744', '149009761', '149009784',
                           '149009796', '149009802', '149009810', '149009821',
                           '149009833', '149009861', '149009877', '149009890',
                           '149009901', '149009910', '149009914', '149009918',
                           '149009961', '149009990', '149009992', '149010025',
                           '149010028', '149010051', '149010053', '149010055',
                           '149010062', '149010064', '149010075', '149010077',
                           '149010084', '149010089', '149010110', '149010131',
                           '149010140', '149010153', '149010156', '149010173',
                           '149010185', '149010193', '149010202', '149010209',
                           '149010214', '149010223', '149010224', '149010225',
                           '149010230', '149010257', '149010277', '149010279',
                           '149010283', '149010286', '149010300', '149010306',
                           '149010342', '149010359', '149010369', '149010375',
                           '149010383', '149010388', '149010396', '149010404',
                           '149010414', '149010421', '149010426', '149010428',
                           '149010429', '149010436', '149010446', '149010447',
                           '149010458', '149010466', '149010471', '149010475',
                           '149010477', '149010497', '149010512', '149010521',
                           '149010535', '149010546', '149010551', '149010556',
                           '149010582', '149010589', '149010617', '149010620',
                           '149010630', '149010635', '149010642', '149010644',
                           '149010647', '149010651', '149010656', '149010657',
                           '149010668', '149010677', '149010699', '149010710',
                           '149010732', '149010756', '149010762', '149010781',
                           '149010824', '149010831', '149010944', '149011029',
                           '149011098', '149011416', '149011438', '149011562',
                           '149011665', '149011683', '149011784', '149011872',
                           '149012007', '149012198', '149012258', '149012288',
                           '149012321', '149012465', '149012563', '149012596',
                           '149012935', '149013282', '149013321', '149013345',
                           '149013454', '149013556', '149013634', '149013684',
                           '149013729', '149013757', '149014016', '149014198',
                           '149014292', '149014317', '149014441', '149014509',
                           '149014664', '149014688', '149014730', '149014785',
                           '149014855', '149014904', '149014969', '149015055',
                           '149015289', '149015938', '149016125', '149016286',
                           '149016348', '149016580', '149016654', '149016762',
                           '149016851', '149017044', '149018022', '149018187',
                           '149018220', '149018287', '149018377', '149018406',
                           '149018472', '149018751', '149018893', '149018934',
                           '149019102', '149019469', '149019509', '149019656',
                           '149019709', '149019806', '149020058', '149020429',
                           '149020523', '149020694', '149020752', '149020806',
                           '149020921', '149021162', '149021213', '149021292',
                           '149021420', '149021426', '149021529', '149021550',
                           '149021811', '149021839', '149021870', '149021888',
                           '149021895', '149021898', '149021903', '149021909',
                           '149021915', '149021918', '149021919', '149021922',
                           '149021938', '149021950', '149021969', '149021976',
                           '149021984', '149021985', '149021992', '149021999',
                           '149022002', '149022003', '149022019', '149022020',
                           '149022030', '149022031', '149022038', '149022051',
                           '149022069', '149022078', '149022093', '149022104',
                           '149022123', '149022146', '149022151', '149022154',
                           '149022158', '149022163', '149022181', '149022197',
                           '149022199', '149022210', '149022228', '149022241',
                           '149022245', '149022264', '149022267', '149022272',
                           '149022279', '149022290', '149022307', '149022321',
                           '149022324', '149022326', '149022328', '149022335',
                           '149022337', '149022346', '149022360', '149022363',
                           '149022365', '149022376', '149022383', '149022395',
                           '149022407', '149022423', '149022426', '149022456',
                           '149022462', '149022463', '149022466', '149022482',
                           '149022495', '149022518', '149022532', '149022550',
                           '149022560', '149022570', '149022575', '149022578',
                           '149022608', '149022705', '149022762', '149022787',
                           '149022983', '149023021', '149023038', '149023043',
                           '149023055', '149023065', '149023067', '149023081',
                           '149023086', '149023091', '149023097', '149023101',
                           '149023105', '149023120', '149023121', '149023139',
                           '149023142', '149023149', '149023152', '149023160',
                           '149023167', '149023183', '149023189', '149023193',
                           '149023206', '149023223', '149023232', '149023239',
                           '149023241', '149023242', '149023246', '149023249',
                           '149023251', '149023252', '149023254', '149023266',
                           '149023270', '149023271', '149023274', '149023293',
                           '149023295', '149023322', '149023329', '149023330',
                           '149023338', '149023352', '149023356', '149023360',
                           '149023362', '149023365', '149023372', '149023380',
                           '149023383', '149023384', '149023385', '149023387',
                           '149023390', '149023396', '149023398', '149023407',
                           '149023445', '149023455', '149023457', '149023465',
                           '149023468', '149023476', '149023484', '149023488',
                           '149023511', '149023514', '149023553', '149023565',
                           '149023592', '149023606', '149023614', '149023622',
                           '149023629', '149023631', '149023641', '149023642',
                           '149023643', '149023650', '149023651', '149023655',
                           '149023666', '149023683', '149023685', '149023701',
                           '149023706', '149023710', '149023722', '149023731',
                           '149023738', '149023752', '149023764', '149023766',
                           '149023770', '149023779', '149023786', '149023792',
                           '149023794', '149023800', '149023813', '149023817',
                           '149023844', '149023852', '149023857', '149023868',
                           '149023872', '149023879', '149023882', '149023890',
                           '149023892', '149023893', '149023901', '149023909',
                           '149023912', '149023914', '149023924', '149023929',
                           '149023936', '149023941', '149023942', '149023943',
                           '149023948', '149023951', '149023960', '149023964',
                           '149023965', '149023967', '149023971', '149023972',
                           '149023975', '149023985', '149024002', '149024014',
                           '149024020', '149024033', '149024036', '149024045',
                           '149024047', '149024053', '149024054', '149024057',
                           '149024058', '149024068', '149024102', '149024106',
                           '149024117', '149024124', '149024130', '149024131',
                           '149024133', '149024137', '149024141', '149024149',
                           '149024153', '149024159', '149024177', '149024194',
                           '149024248', '149024252', '149024257', '149024262',
                           '149024271', '149024273', '149024277', '149024286',
                           '149024292', '149024293', '149024314', '149024316',
                           '149024325', '149024351', '149024354', '149024365',
                           '149024381', '149024386', '149024389', '149024394',
                           '149024406', '149024407', '149024418', '149024437',
                           '149024458', '149024470', '149024478', '149024495',
                           '149024505', '149024528', '149024530', '149024534',
                           '149024540', '149024546', '149024573', '149024591',
                           '149024592', '149024606', '149024611', '149024614',
                           '149024617', '149024633', '149024639', '149024652',
                           '149024667', '149024681', '149024685', '149024686',
                           '149024688', '149024717', '149024720', '149024722',
                           '149024725', '149024735', '149024762', '149024779',
                           '149024786', '149024814', '149024815', '149024826',
                           '149024832', '149024833', '149024838', '149024853',
                           '149024873', '149024878', '149024887', '149024899',
                           '149024903', '149024913', '149024915', '149024934',
                           '149024935', '149024944', '149024949', '149024950',
                           '149024952', '149024954', '149024958', '149024960',
                           '149024966', '149024979', '149024989', '149025063',
                           '149025102', '149025187', '149025337', '149025477',
                           '149025612', '149025711', '149025826', '149025976',
                           '149026373', '149026511', '149026569', '149026627',
                           '149026647', '149026672', '149026898', '149026953',
                           '149026956', '149026979', '149026990', '149027008',
                           '149027010', '149027028', '149027032', '149027045',
                           '149027048', '149027049', '149027053', '149027065',
                           '149027069', '149027089', '149027099', '149027115',
                           '149027124', '149027141', '149027145', '149027159',
                           '149027172', '149027193', '149027194', '149027200',
                           '149027204', '149027207', '149027211', '149027213',
                           '149027226', '149027230', '149027238', '149027270',
                           '149027277', '149027282', '149027295', '149027318',
                           '149027323', '149027333', '149027342', '149027370',
                           '149027377', '149027382', '149027386', '149027417',
                           '149027430', '149027456', '149027489', '149027564',
                           '149027572', '149027611', '149027644', '149027651',
                           '149027721', '149027741', '149027788', '149027854',
                           '149027864', '149027881', '149027906', '149027928',
                           '149027999', '149028270', '149028288', '149028384',
                           '149028404', '149028442', '149028704', '149028820',
                           '149029015', '149029043', '149029131', '149029159',
                           '149029192', '149029200', '149029222', '149029223',
                           '149029245', '149029267', '149029343', '149029344',
                           '149029354', '149029356', '149029364', '149029370',
                           '149029373', '149029379', '149029385', '149029386',
                           '149029395', '149029400', '149029404', '149029407',
                           '149029410', '149029414', '149029419', '149029421',
                           '149029425', '149029429', '149029435', '149029439',
                           '149029441', '149029453', '149029459', '149029465',
                           '149029486', '149029488', '149029494', '149029497',
                           '149029501', '149029502', '149029504', '149029507',
                           '149029518', '149029524', '149029535', '149029541',
                           '149029547', '149029549', '149029551', '149029568',
                           '149029584', '149029606', '149029615', '149029628',
                           '149029633', '149029634', '149029636', '149029694',
                           '149029696', '149029704', '149029708', '149029710',
                           '149029713', '149029715', '149029719', '149029740',
                           '149029746', '149029749', '149029754', '149029776',
                           '149029780', '149029782', '149029795', '149029803',
                           '149029804', '149029818', '149029824', '149029830',
                           '149029831', '149029835', '149029838', '149029843',
                           '149029844', '149029845', '149029850', '149029859',
                           '149029864', '149029867', '149029881', '149029892',
                           '149029913', '149029921', '149029926', '149029927',
                           '149029929', '149029930', '149029941', '149029946',
                           '149029955', '149029959', '149029980', '149029985',
                           '149029987', '149029990', '149029993', '149029995',
                           '149029998', '149030002', '149030007', '149030014',
                           '149030029', '149030030', '149030042', '149030047',
                           '149030062', '149030083', '149030086', '149030089',
                           '149030095', '149030103', '149030113', '149030127',
                           '149030133', '149030137', '149030156', '149030162',
                           '149030168', '149030169', '149030172', '149030196',
                           '149030197', '149030211', '149030219', '149030226',
                           '149030229', '149030232', '149030245', '149030249',
                           '149030252', '149030267', '149030276', '149030284',
                           '149030294', '149030296', '149030301', '149030320',
                           '149030323', '149030353', '149030359', '149030375',
                           '149030385', '149030389', '149030391', '149030410',
                           '149030442', '149030448', '149030469', '149030515',
                           '149030520', '149030540', '149030546', '149030547',
                           '149030554', '149030557', '149030561', '149030577',
                           '149030585', '149030591', '149030599', '149030627',
                           '149030629', '149030635', '149030643', '149030650',
                           '149030671', '149030701', '149030709', '149030726',
                           '149030736', '149030788', '149030803', '149030857',
                           '149030871', '149030875', '149030886', '149030896',
                           '149030927', '149030948', '149030977', '149030987',
                           '149031011', '149031042', '149031055', '149031057',
                           '149031061', '149031097', '149031111', '149031123',
                           '149031137', '149031149', '149031153', '149031155',
                           '149031213', '149031214', '149031250', '149031252',
                           '149031270', '149031283', '149031288', '149031331',
                           '149031333', '149031336', '149031345', '149031352',
                           '149031363', '149031395', '149031405', '149031420',
                           '149031423', '149031426', '149031428', '149031436',
                           '149031449', '149031455', '149031464', '149031467',
                           '149031469', '149031471', '149031486', '149031497',
                           '149031546', '149031564', '149031577', '149031582',
                           '149031608', '149031634', '149031653', '149031657',
                           '149031659', '149031674', '149031686', '149031689',
                           '149031697', '149031714', '149031717', '149031718',
                           '149031727', '149031734', '149031755', '149031768',
                           '149031770', '149031773', '149031776', '149031778',
                           '149031782', '149031786', '149031800', '149031813',
                           '149031830', '149031838', '149031848', '149031874',
                           '149031875', '149031895', '149031898', '149031945',
                           '149031949', '149031950', '149031957', '149032021',
                           '149032029', '149032050', '149032051', '149032066',
                           '149032081', '149032083', '149032113', '149032122',
                           '149032146', '149032166', '149032178', '149032184',
                           '149032189', '149032244', '149032283', '149032368',
                           '149032379', '149032390', '149032392', '149032411',
                           '149032432', '149032434', '149032440', '149032442',
                           '149032448', '149032454', '149032457', '149032463',
                           '149032468', '149032470', '149032491', '149032494',
                           '149032497', '149032502', '149032516', '149032557',
                           '149032575', '149032576', '149032582', '149032583',
                           '149032589', '149032590', '149032594', '149032596',
                           '149032636', '149032639', '149032642', '149032646',
                           '149032653', '149032681', '149032684', '149032686',
                           '149032697', '149032704', '149032714', '149032720',
                           '149032729', '149032732', '149032740', '149032746',
                           '149032749', '149032754', '149032762', '149032791',
                           '149032811', '149032824', '149032838', '149032941',
                           '149032952', '149032967', '149032970', '149032977',
                           '149033010', '149033024', '149033047', '149033060',
                           '149033080', '149033090', '149033100', '149033122',
                           '149033134', '149033140', '149033144', '149033160',
                           '149033166', '149033184', '149033197', '149033203',
                           '149033205', '149033212', '149033264', '149033297',
                           '149033306', '149033319', '149033322', '149033323',
                           '149033336', '149033343', '149033348', '149033360',
                           '149033389', '149033392', '149033396', '149033399',
                           '149033401', '149033403', '149033418', '149033424',
                           '149033443', '149033458', '149033462', '149033464',
                           '149033480', '149033482', '149033487', '149033492',
                           '149033511', '149033514', '149033534', '149033578',
                           '149033587', '149033600', '149033618', '149033644',
                           '149033654', '149033670', '149033672', '149033683',
                           '149033688', '149033696', '149033708', '149033726',
                           '149033728', '149033731', '149033733', '149033750',
                           '149033771', '149033787', '149033798', '149033827',
                           '149033841', '149033852', '149033866', '149033892',
                           '149033905', '149033914', '149033920', '149033956',
                           '149033964', '149033987', '149034015', '149034038',
                           '149034046', '149034047', '149034063', '149034107',
                           '149034109', '149034142', '149034144', '149034150',
                           '149034154', '149034181', '149034262', '149034265',
                           '149034273', '149034281', '149034293', '149034300',
                           '149034308', '149034318', '149034322', '149034335',
                           '149034352', '149034358', '149034378', '149034406',
                           '149034415', '149034436', '149034440', '149034442',
                           '149034454', '149034532', '149034557', '149034571',
                           '149034574', '149034593', '149034601', '149034606',
                           '149034616', '149034695', '149034709', '149034716',
                           '149034787', '149034812', '149034818', '149034830',
                           '149034845', '149034868', '149034877', '149034883',
                           '149034930', '149034934', '149034945', '149034981',
                           '149034986', '149034995', '149035000', '149035033',
                           '149035039', '149035040', '149035043', '149035047',
                           '149035048', '149035057', '149035058', '149035063',
                           '149035081', '149035085', '149035087', '149035091',
                           '149035092', '149035119', '149035122', '149035125',
                           '149035155', '149035158', '149035163', '149035170',
                           '149035176', '149035182', '149035184', '149035191',
                           '149035192', '149035208', '149035209', '149035218',
                           '149035223', '149035232', '149035235', '149035257',
                           '149035259', '149035261', '149035265', '149035267',
                           '149035268', '149035284', '149035286', '149035305',
                           '149035317', '149035325', '149035332', '149035348',
                           '149035359', '149035375', '149035401', '149035422',
                           '149035462', '149035470', '149035514', '149035518',
                           '149035532', '149035539', '149035545', '149035567',
                           '149035604', '149035697', '149035698', '149035700',
                           '149035706', '149035710', '149035717', '149035726',
                           '149035729', '149035756', '149035768', '149035777',
                           '149035786', '149035804', '149035807', '149035809',
                           '149035811', '149035817', '149035861', '149035873',
                           '149035931', '149035947', '149035949', '149035994',
                           '149035999', '149036009', '149036027', '149036033',
                           '149036035', '149036054', '149036059', '149036076',
                           '149036086', '149036095', '149036102', '149036117',
                           '149036122', '149036132', '149036133', '149036148',
                           '149036153', '149036172', '149036174', '149036184',
                           '149036189', '149036196', '149036207', '149036214',
                           '149036233', '149036234', '149036251', '149036263',
                           '149036271', '149036308', '149036310', '149036311',
                           '149036312', '149036368', '149036385', '149036386',
                           '149036390', '149036395', '149036398', '149036399',
                           '149036408', '149036418', '149036428', '149036435',
                           '149036471', '149036475', '149036477', '149036485',
                           '149036513', '149036519', '149036533', '149036539',
                           '149036606', '149036616', '149036625', '149036636',
                           '149036652', '149036684', '149036701', '149036740',
                           '149036745', '149036750', '149036752', '149036769',
                           '149036782', '149036794', '149036827', '149036841',
                           '149036856', '149036872', '149036889', '149036916',
                           '149036919', '149036920', '149036942', '149036982',
                           '149036987', '149036991', '149037058', '149037111',
                           '149037125', '149037151', '149037169', '149037178',
                           '149037195', '149037235', '149037238', '149037263',
                           '149037280', '149037284', '149037289', '149037299',
                           '149037339', '149037366', '149037403', '149037411',
                           '149037413', '149037450', '149037464', '149037466',
                           '149037485', '149037488', '149037502', '149037504',
                           '149037508', '149037511', '149037514', '149037515',
                           '149037516', '149037519', '149037520', '149037536',
                           '149037537', '149037538', '149037548', '149037549',
                           '149037551', '149037560', '149037561', '149037564',
                           '149037578', '149037583', '149037596', '149037599',
                           '149037626', '149037629', '149037630', '149037631',
                           '149037632', '149037634', '149037638', '149037644',
                           '149037645', '149037649', '149037657', '149037662',
                           '149037665', '149037669', '149037671', '149037674',
                           '149037676', '149037686', '149037692', '149037702',
                           '149037704', '149037712', '149037715', '149037716',
                           '149037721', '149037728', '149037731', '149037748',
                           '149037754', '149037761', '149037765', '149037766',
                           '149037770', '149037789', '149037790', '149037796',
                           '149037798', '149037811', '149037831', '149037852',
                           '149037883', '149037908', '149037911', '149037935',
                           '149037938', '149037963', '149037994', '149037999',
                           '149038000', '149038004', '149038024', '149038031',
                           '149038056', '149038084', '149038085', '149038105',
                           '149038107', '149038125', '149038135', '149038137',
                           '149038138', '149038163', '149038169', '149038176',
                           '149038189', '149038224', '149038242', '149038259',
                           '149038266', '149038267', '149038328', '149038329',
                           '149038372', '149038383', '149038399', '149038407',
                           '149038476', '149038482', '149038483', '149038484',
                           '149038525', '149038529', '149038537', '149038543',
                           '149038554', '149038555', '149038559', '149038580',
                           '149038581', '149038604', '149038606', '149038616',
                           '149038624', '149038628', '149038632', '149038640',
                           '149038656', '149038663', '149038676', '149038681',
                           '149038696', '149038705', '149038716', '149038725',
                           '149038728', '149038737', '149038755', '149038781',
                           '149038782', '149038796', '149038848', '149038859',
                           '149038874', '149038877', '149038896', '149038920',
                           '149038931', '149038934', '149038951', '149038957',
                           '149038989', '149039010', '149039033', '149039051',
                           '149039052', '149039055', '149039060', '149039123',
                           '149039132', '149039172', '149039188', '149039210',
                           '149039233', '149039242', '149039281', '149039288',
                           '149039306', '149039321', '149039332', '149039341',
                           '149039344', '149039361', '149039384', '149039402',
                           '149039477', '149039482', '149039500', '149039501',
                           '149039508', '149039511', '149039566', '149039592',
                           '149039622', '149039623', '149039647', '149039711',
                           '149039721', '149039724', '149039738', '149039756',
                           '149039764', '149039780', '149039790', '149039806',
                           '149039820', '149039833', '149039845', '149039855',
                           '149039867', '149039909', '149039912', '149039916',
                           '149039918', '149039924', '149039945', '149039946',
                           '149039962', '149039984', '149039989', '149039990',
                           '149039995', '149039996', '149039999', '149040002',
                           '149040020', '149040022', '149040031', '149040037',
                           '149040038', '149040053', '149040072', '149040073',
                           '149040092', '149040111', '149040120', '149040134',
                           '149040143', '149040152', '149040172', '149040178',
                           '149040179', '149040195', '149040209', '149040210',
                           '149040213', '149040215', '149040223', '149040228',
                           '149040254', '149040268', '149040270', '149040276',
                           '149040311', '149040316', '149040329', '149040340',
                           '149040344', '149040351', '149040363', '149040376',
                           '149040410', '149040455', '149040466', '149040471',
                           '149040477', '149040497', '149040513', '149040515',
                           '149040516', '149040525', '149040542', '149040557',
                           '149040566', '149040580', '149040630', '149040855',
                           '149040891', '149040959', '149041030', '149041074',
                           '149041079', '149041188', '149041189', '149041257',
                           '149041277', '149041280', '149041318', '149041335',
                           '149041344', '149041351', '149041352', '149041355',
                           '149041359', '149041366', '149041373', '149041381',
                           '149041401', '149041453', '149041461', '149041471',
                           '149041492', '149041503', '149041534', '149041548',
                           '149041573', '149041612', '149041643', '149041651',
                           '149041656', '149041672', '149041697', '149041708',
                           '149041715', '149041776', '149041861', '149041926',
                           '149041934', '149041964', '149041974', '149041988',
                           '149042027', '149042037', '149042049', '149042054',
                           '149042061', '149042075', '149042160', '149042198',
                           '149042214', '149042233', '149042259', '149042261',
                           '149042278', '149042294', '149042300', '149042422',
                           '149042444', '149042461', '149042469', '149042509',
                           '149042536', '149042537', '149042545', '149042548',
                           '149042555', '149042580', '149042587', '149042617',
                           '149042643', '149042652', '149042668', '149042683',
                           '149042697', '149042715', '149042720', '149042736',
                           '149042737', '149042748', '149042768', '149042789',
                           '149042810', '149042824', '149042872', '149042994',
                           '149043006', '149043009', '149043041', '149043142',
                           '149043157', '149043167', '149043226', '149043263',
                           '149043329', '149043412', '149043421', '149043475',
                           '149043501', '149043522', '149043533', '149043608',
                           '149043619', '149043622', '149043631', '149043675',
                           '149043690', '149043691', '149043713', '149043750',
                           '149043757', '149043774', '149043809', '149043814',
                           '149043856', '149043881', '149043924', '149043951',
                           '149043964', '149043974', '149044009', '149044011',
                           '149044015', '149044019', '149044021', '149044029',
                           '149044043', '149044058', '149044060', '149044065',
                           '149044066', '149044077', '149044122', '149044139',
                           '149044141', '149044156', '149044209', '149044223',
                           '149044234', '149044235', '149044250', '149044266',
                           '149044305', '149044311', '149044319', '149044407',
                           '149044471', '149044531', '149044566', '149044585',
                           '149044615', '149044627', '149044645', '149044716',
                           '149044766', '149044810', '149044812', '149044883',
                           '149044895', '149044926', '149044943', '149044950',
                           '149044953', '149044969', '149044987', '149045025',
                           '149045091', '149045128', '149045157', '149045175',
                           '149045192', '149045229', '149045260', '149045276',
                           '149045289', '149045317', '149045320', '149045361',
                           '149045366', '149045384', '149045402', '149045415',
                           '149045421', '149257831' )


UPDATE PC
SET ENTITY_ID = INC.ID, PARENT_ID = INC.ID
--SELECT * 
FROM dbo.PROPERTY_CHANGE PC 
INNER JOIN dbo.LOAN L ON L.ID = PC.ENTITY_ID AND PC.ENTITY_NAME_TX = 'Allied.UniTrac.Collateral'
INNER JOIN  UniTracHDStorage..INC0226980 INC ON INC.Loan_ID = L.Id 
WHERE PC.ID IN 

SELECT * FROM dbo.PROPERTY_CHANGE
WHERE ID IN
(SELECT * FROM #tmp	)


SELECT * FROM UniTracHDStorage..INC0226980
