USE UniTrac


SELECT * FROM dbo.WORK_ITEM
WHERE WORKFLOW_DEFINITION_ID =13

SELECT * FROM dbo.WORK_ITEM
WHERE id = 42654212

SELECT * FROM dbo.LENDER
WHERE ID = 835


SELECT * FROM dbo.WORK_ITEM_ACTION
WHERE WORK_ITEM_ID = 42654212

SELECT * FROM dbo.WORK_ITEM_ACTION
WHERE WORK_ITEM_ID IN (42523890,
42532265)

SELECT * FROM dbo.PROCESS_DEFINITION
WHERE ID = 423810


SELECT * FROM dbo.PROCESS_LOG
WHERE PROCESS_DEFINITION_ID = 423810



SELECT * FROM dbo.WORK_ITEM
WHERE WORKFLOW_DEFINITION_ID = 13
AND RELATE_TYPE_CD = 'ProcessDefinition'
AND LENDER_ID = 2275


SELECT * FROM dbo.PROCESS_LOG
WHERE PROCESS_DEFINITION_ID = 423810


exec GetRelatedDatas @id=0,@relateId=423810,@relateClassName='ProcessDefinition'

exec GetProcessLogs @processDefinitionId=423810,@mostRecentLogs='Y'


SELECT * FROM dbo.PROCESS_LOG_ITEM
WHERE PROCESS_LOG_ID = 53101839


exec GetMessage @receivedStatusCd=N'RCVD',@messageDirection=N'I',@processedIn=N'N',@receivedFromTradingPartnerType=N'LFP_TP',@fileType=N'ESCPMTAPP',@orderByColumn=N'ID',@orderByDirection=N'ASC'

	
	  exec SaveMessage @ID=0,@SENT_STATUS_CD='PEND',@RECEIVED_STATUS_CD='RCVD',@MESSAGE_DIRECTION_CD='I',@SENDING_TRADING_PARTNER_ID=0,@RECIPIENT_TRADING_PARTNER_ID=3174,@DELIVER_TO_TRADING_PARTNER_ID=2046,@RECEIVED_FROM_TRADING_PARTNER_ID=3174,@UPDATE_USER_TX='UBSRPT',@PROCESSED_IN='N',@RELATE_ID_TX='',@RELATE_TYPE_CD='',@DELIVERY_INFO_ID=3923,@lockId=0

	  SELECT * FROM dbo.RELATED_DATA rd 
	  JOIN dbo.DELIVERY_INFO DI ON DI.ID = RD.RELATE_ID AND RD.VALUE_TX = 'INSBCKFD'
	  JOIN dbo.TRADING_PARTNER TP ON TP.ID = DI.TRADING_PARTNER_ID
	  WHERE TP.EXTERNAL_ID_TX= '4171'


	  UPDATE WI
	  SET purge_dt = GETDATE(), Status_Cd= 'Withdrawn'
	 --SELECT * 
	  FROM dbo.WORK_ITEM WI
	  WHERE ID IN (42654212,42676899)



	  SELECT * FROM dbo.WORK_ITEM
	  WHERE WORKFLOW_DEFINITION_ID = 13 AND RELATE_TYPE_CD  ='ProcessDefinition' AND PURGE_DT IS NULL

	  SELECT * FROM dbo.PROCESS_DEFINITION
	  WHERE ID = 423810

	    exec GetTradingPartner @externalId = '4171'


		SELECT * FROM dbo.MESSAGE
		WHERE DELIVERY_INFO_ID = 3923 AND UPDATE_DT >= '2017-11-22 '


SELECT * FROM dbo.TRADING_PARTNER_LOG
WHERE MESSAGE_ID = 11122888

SELECT * FROM dbo.LENDER
WHERE ID = 2238




SELECT * FROM dbo.BLOB
 WHERE  UPDATE_DT >= '2017-11-22 '

		SELECT * FROM  dbo.DOCUMENT WHERE DELIVERY_INFO_GROUP_ID = 3923

		exec SaveDocument @ID=0,@MESSAGE_ID=10172951,@COMPRESSED_IN='N',@ENCRYPTED_IN='N',@VALIDATION_STATUS_CD='N',@TRANSFORMATION_STATUS_CD='PEND',@DELIVERY_INFO_GROUP_ID=5919,@NAME_TX='INS_2725-University of Iowa Community CU-Mortgage-Hazard-Flood-Active Loans_20171121215052.xml',@UPDATE_USER_TX='UBSRPT',@SIZE_NO=1551697,@lockId=0


 exec GetPortfolioXML @lenderId=2275,@branchId=12836,@divisionId=11147,@coverageTypeCode=N'EARTHQUAKE,HAZARD,FLOOD',@activeLoansIn=N'Y',@uninsuredLoansOnlyIn=N'N',@escrowIn=N'N',@department=NULL


 exec GetWorkflowDefinition @name=N'InsuranceBackfeed'


 exec GetWorkflowStateTransitionRule @workflowDefinitionId=13


 exec GetWorkflowUserAssignmentRule @workflowDefinitionId=13

 exec GetWorkQueue @filterWorkItemType=N'InsuranceBackfeed'

 exec GetBusinessOptionGroups @relateId=177,@relateClassNm='UnitracWorkQueue',@typeCd='WorkQueueFilter'

 exec GetBusinessRuleBases @businessOptionGroupId=7903

 exec GetRuleConditionBases @businessRuleBaseId=23863


 exec SaveWorkItem @ID=0,@NAME_TX=NULL,@WORKFLOW_DEFINITION_ID=13,@RELATE_ID=10172951,@RELATE_TYPE_CD='LDHLib.Message',@ACTIVE_IN='Y',@CURRENT_QUEUE_ID=178,@CURRENT_OWNER_ID=930,@STATUS_CD='Initial',@PARENT_ID=0,@LAST_WORK_ITEM_ACTION_ID=0,@PRIORITY_NUM=0,@UPDATE_USER_TX='UBSRPT',@RESERVED_OWNER_ID=0,@RESERVED_DT=NULL,@CHECKED_OUT_OWNER_ID=930,@CHECKED_OUT_DT='2017-11-21 21:50:42.4900000',@CONTENT_XML='<Content>
  <Property />
  <Collateral />
  <Coverage />
  <Loan />
  <Owner />
  <Lender />
  <Information />
</Content>',@LAST_EVALUATION_DT=NULL,@USER_ROLE_CD='USER',@DELAY_UNTIL_DT=NULL,@DO_NOT_EVALUATE_IN='N',@lockId=0


	  SELECT tp.EXTERNAL_ID_TX, tp.NAME_TX, * FROM dbo.RELATED_DATA rd 
	  JOIN dbo.DELIVERY_INFO DI ON DI.ID = RD.RELATE_ID AND RD.VALUE_TX = 'INSBCKFD'
	  JOIN dbo.TRADING_PARTNER TP ON TP.ID = DI.TRADING_PARTNER_ID
	  JOIN dbo.DELIVERY_INFO_GROUP DIG ON DIG.DELIVERY_INFO_ID = DI.ID
	  WHERE TP.EXTERNAL_ID_TX= '3551'


	  SELECT * FROM dbo.DELIVERY_INFO_GROUP
	  WHERE DELIVERY_INFO_ID = 3942

		SELECT * FROM  dbo.DOCUMENT WHERE DELIVERY_INFO_GROUP_ID = 6158

		SELECT * FROM dbo.PROCESS_DEFINITION