
IF NOT EXISTS (SELECT * FROM REPORT WHERE NAME_TX = 'CFPBPremiumRefund')
INSERT INTO REPORT (NAME_TX, DISPLAY_NAME_TX, DESCRIPTION_TX, DASHBOARD_IN, SERVER_PATH_TX, CREATE_DT, UPDATE_DT, UPDATE_USER_TX, LOCK_ID, CATEGORY_CD,ACTIVE_IN)
VALUES ('CFPBPremiumRefund', 'CFPB Compliance Premium Refund', 'CFPB Compliance Premium Refund', 'Y', 'UniTracReports', GETDATE(), GETDATE(), 'admin', 1, 'LENDER', 'Y')
Go

DECLARE @reportID bigint
SELECT @reportID = ID FROM Report WHERE NAME_TX='CFPBPremiumRefund'


--DOMAIN FOR Report_PaymentChangesLenderFile
IF NOT EXISTS (SELECT * FROM REF_DOMAIN WHERE DOMAIN_CD = 'Report_CFPBPremiumRefund')
Insert into REF_DOMAIN (DOMAIN_CD,DESCRIPTION_TX,REF_CODE_MAX_LENGTH_NO,CREATE_DT,UPDATE_DT,PURGE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_BASED_IN)
Values ('Report_CFPBPremiumRefund','Report_CFPBPremiumRefund',30,GETDATE(),GETDATE(),NULL,'admin',1,'N')

--DEFAULT
IF NOT EXISTS (SELECT * FROM REF_CODE WHERE CODE_CD = 'DEFAULT' and DOMAIN_CD ='Report_CFPBPremiumRefund')
Insert into REF_CODE (CODE_CD,DOMAIN_CD,MEANING_TX,DESCRIPTION_TX,ACTIVE_IN,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID)
Values ('DEFAULT','Report_CFPBPremiumRefund','DEFAULT','DEFAULT','Y',GETDATE(),GETDATE(),'admin',1,0)


--CFPB_PREMREFUND
IF NOT EXISTS (SELECT * FROM REF_CODE WHERE CODE_CD = 'CFPB_PREMREFUND' and DOMAIN_CD ='Report_CFPBPremiumRefund')
Insert into REF_CODE (CODE_CD,DOMAIN_CD,MEANING_TX,DESCRIPTION_TX,ACTIVE_IN,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID)
Values ('CFPB_PREMREFUND','Report_CFPBPremiumRefund','Premium Refund','Lender Placed Premium Refund Compliance Review','Y',GETDATE(),GETDATE(),'admin',1,0)


--REPORT_CONFIG
--CFPB_PREMREFUND
IF NOT EXISTS (SELECT * FROM REPORT_CONFIG WHERE CODE_TX = 'CFPB_PREMREFUND' and REPORT_DOMAIN_CD ='Report_CFPBPremiumRefund')
Insert into REPORT_CONFIG (CODE_TX,MEANING_TX,NAME_TX,REPORT_ID,REPORT_DOMAIN_CD,REPORT_CD,GROUP_TX,SORT_TX,FILTER_TX,HEADER_TX,FOOTER_TX, DISPLAY_IN, CREATE_DT, UPDATE_DT, UPDATE_USER_TX, LOCK_ID)
Values ('CFPB_PREMREFUND','Premium Refund','AAALender Placed Premium Refund Compliance Review', '27','Report_CFPBPremiumRefund','CFPB_PREMREFUND','[LOAN_BRANCHCODE_TX]','[OWNER_LASTNAME_TX] + ' + ''' / ''' + ' + isnull([OWNER_FIRSTNAME_TX],'''')',
'','','', 'Y', GETDATE(), GETDATE(), 'admin', 1)


--Common
IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE ATTRIBUTE_CD = 'LN_Number' AND REF_CD = 'DEFAULT' AND DOMAIN_CD = 'Report_CFPBPremiumRefund')
INSERT INTO REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID) 
Values ('LN_Number','DEFAULT','Report_CFPBPremiumRefund','T',GETDATE(),GETDATE(),'admin',1,0)

IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE ATTRIBUTE_CD = 'OWN_Name' AND REF_CD = 'DEFAULT' AND DOMAIN_CD = 'Report_CFPBPremiumRefund')
INSERT INTO REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID) 
Values ('OWN_Name','DEFAULT','Report_CFPBPremiumRefund','T',GETDATE(),GETDATE(),'admin',1,0)

IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE ATTRIBUTE_CD = 'PRY_Description' AND REF_CD = 'DEFAULT' AND DOMAIN_CD = 'Report_CFPBPremiumRefund')
INSERT INTO REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID) 
Values ('PRY_Description','DEFAULT','Report_CFPBPremiumRefund','T',GETDATE(),GETDATE(),'admin',1,0)

--Optional
IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE ATTRIBUTE_CD = 'INS_Coverage' AND REF_CD = 'DEFAULT' AND DOMAIN_CD = 'Report_CFPBPremiumRefund')
INSERT INTO REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID) 
Values ('INS_Coverage','DEFAULT','Report_CFPBPremiumRefund','F',GETDATE(),GETDATE(),'admin',1,0)

IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE ATTRIBUTE_CD = 'INS_Number' AND REF_CD = 'DEFAULT' AND DOMAIN_CD = 'Report_CFPBPremiumRefund')
INSERT INTO REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID) 
Values ('INS_Number','DEFAULT','Report_CFPBPremiumRefund','F',GETDATE(),GETDATE(),'admin',1,0)

IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE ATTRIBUTE_CD = 'INS_Eff' AND REF_CD = 'DEFAULT' AND DOMAIN_CD = 'Report_CFPBPremiumRefund')
INSERT INTO REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID) 
Values ('INS_Eff','DEFAULT','Report_CFPBPremiumRefund','F',GETDATE(),GETDATE(),'admin',1,0)

IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE ATTRIBUTE_CD = 'INS_CancDt' AND REF_CD = 'DEFAULT' AND DOMAIN_CD = 'Report_CFPBPremiumRefund')
INSERT INTO REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID) 
Values ('INS_CancDt','DEFAULT','Report_CFPBPremiumRefund','F',GETDATE(),GETDATE(),'admin',1,0)


--Optional
IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE ATTRIBUTE_CD = 'INS_Coverage' AND REF_CD = 'CFPB_PREMREFUND' AND DOMAIN_CD = 'Report_CFPBPremiumRefund')
INSERT INTO REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID) 
Values ('INS_Coverage','CFPB_PREMREFUND','Report_CFPBPremiumRefund','T',GETDATE(),GETDATE(),'admin',1,0)

IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE ATTRIBUTE_CD = 'INS_Number' AND REF_CD = 'CFPB_PREMREFUND' AND DOMAIN_CD = 'Report_CFPBPremiumRefund')
INSERT INTO REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID) 
Values ('INS_Number','CFPB_PREMREFUND','Report_CFPBPremiumRefund','T',GETDATE(),GETDATE(),'admin',1,0)

IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE ATTRIBUTE_CD = 'INS_Eff' AND REF_CD = 'CFPB_PREMREFUND' AND DOMAIN_CD = 'Report_CFPBPremiumRefund')
INSERT INTO REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID) 
Values ('INS_Eff','CFPB_PREMREFUND','Report_CFPBPremiumRefund','T',GETDATE(),GETDATE(),'admin',1,0)

IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE ATTRIBUTE_CD = 'INS_CancDt' AND REF_CD = 'CFPB_PREMREFUND' AND DOMAIN_CD = 'Report_CFPBPremiumRefund')
INSERT INTO REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID) 
Values ('INS_CancDt','CFPB_PREMREFUND','Report_CFPBPremiumRefund','T',GETDATE(),GETDATE(),'admin',1,0)


--GroupBy and SortBy
IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE REF_CD = 'Brch' and VALUE_TX = 'Report_CFPBPremiumRefund')
Insert into REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID)
Values ('GB_CFPBComplianceRefund','Brch','Report_GroupBy','Report_CFPBPremiumRefund',GETDATE(),GETDATE(),'admin',1,0)

IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE REF_CD = 'BorrNameLoan' and VALUE_TX = 'Report_CFPBPremiumRefund')
Insert into REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID)
Values ('SB_CFPBComplianceRefund','BorrNameLoan','Report_SortBy','Report_CFPBPremiumRefund',GETDATE(),GETDATE(),'admin',1,0)

IF NOT EXISTS (SELECT * FROM REF_CODE_ATTRIBUTE WHERE REF_CD = 'LoanNumber' and VALUE_TX = 'Report_CFPBPremiumRefund')
Insert into REF_CODE_ATTRIBUTE (ATTRIBUTE_CD,REF_CD,DOMAIN_CD,VALUE_TX,CREATE_DT,UPDATE_DT,UPDATE_USER_TX,LOCK_ID,AGENCY_ID)
Values ('SB_CFPBComplianceRefund2','LoanNumber','Report_SortBy','Report_CFPBPremiumRefund',GETDATE(),GETDATE(),'admin',1,0)

GO


