USE UniTrac


---Search by process id
SELECT CONVERT(TIME,END_DT- START_DT)[hh:mm:ss.ms], PD.NAME_TX,  PL.*
FROM dbo.PROCESS_LOG PL
JOIN dbo.PROCESS_DEFINITION PD ON PD.ID = PL.PROCESS_DEFINITION_ID
WHERE PL.UPDATE_DT >= '2019-03-05' AND PD.ID = '30' --and end_dt is not null
ORDER BY PL.UPDATE_DT DESC 



---Search by process name
SELECT CONVERT(TIME,END_DT- START_DT)[hh:mm:ss.ms], PD.NAME_TX,  PL.*
FROM dbo.PROCESS_LOG PL
JOIN dbo.PROCESS_DEFINITION PD ON PD.ID = PL.PROCESS_DEFINITION_ID
WHERE PL.UPDATE_DT >= '2019-03-01' AND PD.Name_tx like '' --and end_dt is not null
ORDER BY PL.UPDATE_DT DESC 


--Search by type
SELECT CONVERT(TIME,END_DT- START_DT)[hh:mm:ss.ms],  PD.NAME_TX,  PL.*
FROM dbo.PROCESS_LOG PL
JOIN dbo.PROCESS_DEFINITION PD ON PD.ID = PL.PROCESS_DEFINITION_ID
WHERE PL.UPDATE_DT >= '2019-03-01' AND PD.PROCESS_TYPE_CD IN ( '')
ORDER BY PL.UPDATE_DT DESC 

--Search by server
SELECT CONVERT(TIME,END_DT- START_DT)[hh:mm:ss.ms],  PD.NAME_TX,  PL.*
FROM dbo.PROCESS_LOG PL
JOIN dbo.PROCESS_DEFINITION PD ON PD.ID = PL.PROCESS_DEFINITION_ID
WHERE PL.UPDATE_DT >= '2019-03-01' AND SERVER_TX IN  ('')
ORDER BY PL.UPDATE_DT DESC 

--Search by Service
SELECT top 5 CONVERT(TIME,END_DT- START_DT)[hh:mm:ss.ms],  PD.NAME_TX,  PL.*
FROM dbo.PROCESS_LOG PL
JOIN dbo.PROCESS_DEFINITION PD ON PD.ID = PL.PROCESS_DEFINITION_ID
WHERE PL.UPDATE_DT >= '2019-03-01' and SERVICE_NAME_TX IN ('')
ORDER BY PL.UPDATE_DT DESC 



/*	

SELECT *
FROM PROCESS_DEFINITION
WHERE NAME_TX like '%5044%'
and id = 543793


SELECT * FROM dbo.PROCESS_DEFINITION
WHERE PROCESS_TYPE_CD IN ( 'WFEVAL')


SELECT * FROM dbo.PROCESS_DEFINITION
WHERE ID IN (72066, 72067)


*/


