--Loan Screen Information - LOAN/COLLATERAL/PROPERTY/OWNER/REQUIRED COVERAGE
SELECT TOP 10 L.NUMBER_TX, l.LENDER_ID, RC.CPI_QUOTE_ID, RC.CPI_STATUS_CD, RC.CPI_SUB_STATUS_CD,L.LENDER_ID, RC.* FROM LOAN L
INNER JOIN COLLATERAL C ON L.ID = C.LOAN_ID
INNER JOIN PROPERTY P ON C.PROPERTY_ID = P.ID
INNER JOIN REQUIRED_COVERAGE RC ON P.ID = RC.PROPERTY_ID
INNER JOIN OWNER_LOAN_RELATE OL ON L.ID = OL.LOAN_ID
INNER JOIN OWNER O ON OL.OWNER_ID = O.ID
INNER JOIN OWNER_ADDRESS OA ON O.ADDRESS_ID = OA.ID
WHERE CPI_STATUS_CD = 'X' AND CPI_QUOTE_ID = '33992982'

SELECT TOP 5 * FROM dbo.CPI_ACTIVITY A
INNER JOIN dbo.CPI_QUOTE Q ON Q.ID = A.CPI_QUOTE_ID
WHERE Q.ID = '33992982'


SELECT  *
FROM INTERACTION_HISTORY
WHERE PROPERTY_ID = 77399787
AND TYPE_CD = 'CPI'

SELECT TOP 5 * FROM dbo.CPI_ACTIVITY A
INNER JOIN dbo.CPI_QUOTE Q ON Q.ID = A.CPI_QUOTE_ID
WHERE Q.ID = '33992982'

SELECT * FROM dbo.MASTER_POLICY
WHERE ID IN (3281)

SELECT * FROM dbo.MASTER_POLICY_ASSIGNMENT
WHERE ID IN (50276314)

SELECT * FROM dbo.CANCEL_PROCEDURE
WHERE ID IN (103)


SELECT * FROM dbo.LENDER
WHERE ID IN (4)

--Loan Screen Information - LOAN/COLLATERAL/PROPERTY/OWNER/REQUIRED COVERAGE
SELECT TOP 5 BalanceOptionBalanceType, BalanceOptionMaximumOption, BalanceOptionMinimumOption, * from LOAN L
INNER JOIN COLLATERAL C ON L.ID = C.LOAN_ID
INNER JOIN PROPERTY P ON C.PROPERTY_ID = P.ID
INNER JOIN REQUIRED_COVERAGE RC ON P.ID = RC.PROPERTY_ID
INNER JOIN OWNER_LOAN_RELATE OL ON L.ID = OL.LOAN_ID
INNER JOIN OWNER O ON OL.OWNER_ID = O.ID
INNER JOIN OWNER_ADDRESS OA ON O.ADDRESS_ID = OA.ID
WHERE  BalanceOptionMinimumOption LIKE '%CPI%' 




SELECT DISTINCT TYPE_CD FROM dbo.CPI_ACTIVITY

SELECT * FROM UniTrac..REF_CODE
WHERE CODE_CD IN (SELECT DISTINCT CPI_STATUS_CD FROM dbo.REQUIRED_COVERAGE)


SELECT DISTINCT CPI_STATUS_CD FROM dbo.REQUIRED_COVERAGE

SELECT * FROM UniTrac..REF_CODE
WHERE CODE_CD like '%obc%'

SELECT * FROM UniTrac..REF_CODE
WHERE --CODE_CD IN (
 ---)

--SELECT  DISTINCT  CPI_SUB_STATUS_CD FROM dbo.REQUIRED_COVERAGE

DOMAIN_CD IN 
('LenderOption', 'LetterRuleConditionType') ORDER BY DOMAIN_CD

'RequiredCoverageInsSubStatus'
 --'CPIActivityType',
  
SELECT  DISTINCT CPI_STATUS_CD  FROM dbo.REQUIRED_COVERAGE
SELECT * FROM dbo.LENDER
WHERE CODE_TX IN ('') 



--Service Center Setup by Division
SELECT  LO.*
FROM LENDER L
INNER JOIN LENDER_ORGANIZATION LO ON L.ID = LO.LENDER_ID
INNER JOIN RELATED_DATA LOC ON LO.ID = LOC.RELATE_ID --AND LOC.DEF_ID = '105'
WHERE L.CODE_TX = ''



SELECT  *
FROM    dbo.COLLATERAL_CODE
WHERE   DESCRIPTION_TX LIKE '%%'
        AND AGENCY_ID = '1'
        AND ID IN (  )



SELECT RFC.MEANING_TX [CPI Status],L.NUMBER_TX, L.ID [Lender ID], L.STATUS_CD [Loan Status], LL.CODE_TX, LL.NAME_TX, 
WI.ID [WorkItem ID], WI.STATUS_CD, WI.UPDATE_USER_TX,WI.CREATE_DT, Wi.UPDATE_DT, IH.*
FROM WORK_ITEM WI
INNER JOIN interaction_history IH ON WI.RELATE_ID = IH.ID AND WI.RELATE_TYPE_CD = 'Allied.UniTrac.OutboundCallInteraction'
INNER JOIN LOAN L ON IH.LOAN_ID = L.ID
INNER JOIN COLLATERAL C ON L.ID = C.LOAN_ID
INNER JOIN PROPERTY P ON C.PROPERTY_ID = P.ID
INNER JOIN REQUIRED_COVERAGE RC ON P.ID = RC.PROPERTY_ID
INNER JOIN dbo.LENDER LL ON LL.ID = L.LENDER_ID
LEFT JOIN dbo.REF_CODE RFC ON RFC.CODE_CD = RC.CPI_STATUS_CD AND DOMAIN_CD = 'RequiredCoverageInsStatus'
WHERE CPI_STATUS_CD = 'X' AND CAST(WI.UPDATE_DT AS DATE) = CAST(GETDATE() AS DATE)



WORKFLOW_DEFINITION_ID = 6 AND WI.PURGE_DT IS NULL AND WI.STATUS_CD <> 'Complete'
AND WI.STATUS_CD <> 'Error' AND WI.STATUS_CD <> 'Withdrawn'