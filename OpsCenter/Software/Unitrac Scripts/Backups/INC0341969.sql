USE [UniTrac]
GO 



		   SELECT * FROM dbo.WORK_ITEM
		   WHERE ID IN (44320233)


		   SELECT * FROM dbo.UTL_MATCH_RESULT
		   WHERE ID IN (129603573)



		   SELECT C.* FROM dbo.LOAN L
		   JOIN dbo.COLLATERAL C ON C.LOAN_ID = L.ID
		   JOIN dbo.PROPERTY P ON P.ID = C.PROPERTY_ID
		   JOIN dbo.REQUIRED_COVERAGE RC ON RC.PROPERTY_ID = P.ID
		   WHERE C.ID IN (10638140, 10638141)

--10638141

SELECT * FROM dbo.COLLATERAL
WHERE ID IN (10638140, 10638141)

SELECT * FROM dbo.PROPERTY
WHERE ID IN (10303125, 10303126)

SELECT * FROM dbo.LOAN L
JOIN dbo.NOTICE	 N ON N.LOAN_ID = L.ID
WHERE L.ID IN (10924906)




SELECT * FROM dbo.LOAN L
JOIN dbo.FORCE_PLACED_CERTIFICATE	 N ON N.LOAN_ID = L.ID
WHERE L.ID IN (10924906)


SELECT * 
--INTO #tmp
FROM  dbo.INTERACTION_HISTORY
WHERE PROPERTY_ID IN (10303126, 10303125,207652418)
ORDER BY PROPERTY_ID ASC 




----To see what loan status is
SELECT L.PURGE_DT, L.RECORD_TYPE_CD, P.PURGE_DT, P.RECORD_TYPE_CD, C.PURGE_DT,
L.ID, P.ID, C.ID
FROM LOAN L
INNER JOIN COLLATERAL C ON L.ID = C.LOAN_ID
INNER JOIN PROPERTY P ON C.PROPERTY_ID = P.ID
WHERE C.ID IN (10638141)





--Loan Screen Information - LOAN/COLLATERAL/PROPERTY/OWNER/REQUIRED COVERAGE
SELECT C.* 
INTO UniTracHDStorage..INC0341969_C
FROM LOAN L
INNER JOIN COLLATERAL C ON L.ID = C.LOAN_ID
INNER JOIN PROPERTY P ON C.PROPERTY_ID = P.ID
WHERE C.ID IN (10638141)



--Loan Screen Information - LOAN/COLLATERAL/PROPERTY/OWNER/REQUIRED COVERAGE
SELECT P.* 
INTO UniTracHDStorage..INC0341969_P
FROM LOAN L
INNER JOIN COLLATERAL C ON L.ID = C.LOAN_ID
INNER JOIN PROPERTY P ON C.PROPERTY_ID = P.ID
WHERE C.ID IN (10638141)




UPDATE PROPERTY
SET  UPDATE_DT = GETDATE(),UPDATE_USER_TX = 'INC0341969', LOCK_ID = CASE WHEN LOCK_ID >= 255 THEN 1 ELSE LOCK_ID + 1 END, RECORD_TYPE_CD = 'D', PURGE_DT = NULL
--SELECT * FROM PROPERTY
WHERE ID IN (SELECT ID FROM  UniTracHDStorage..INC0341969_P)



UPDATE dbo.COLLATERAL
SET PURGE_DT = GETDATE()
WHERE ID IN (10638141)


INSERT  INTO PROPERTY_CHANGE
 ( ENTITY_NAME_TX , ENTITY_ID , USER_TX , ATTACHMENT_IN , 
 CREATE_DT , AGENCY_ID , DESCRIPTION_TX ,  DETAILS_IN , FORMATTED_IN ,
 LOCK_ID , PARENT_NAME_TX , PARENT_ID , TRANS_STATUS_CD , UTL_IN )
 SELECT DISTINCT 'Allied.UniTrac.Loan' , L.ID , 'INC0341969' , 'N' , 
 GETDATE() ,  1 , 
 'Marked back to deleted', 
 'Y' , 'N' , 1 ,  'Allied.UniTrac.Loan' , L.ID , 'PEND' , 'N'
FROM LOAN L 
WHERE L.ID IN (SELECT ID FROM UniTracHDStorage..INC0341969_L)



INSERT  INTO PROPERTY_CHANGE
 ( ENTITY_NAME_TX , ENTITY_ID , USER_TX , ATTACHMENT_IN , 
 CREATE_DT , AGENCY_ID , DESCRIPTION_TX ,  DETAILS_IN , FORMATTED_IN ,
 LOCK_ID , PARENT_NAME_TX , PARENT_ID , TRANS_STATUS_CD , UTL_IN )
 SELECT DISTINCT 'Allied.UniTrac.Property' , P.ID , 'INC0341969' , 'N' , 
 GETDATE() ,  1 , 
 'Marked back to deleted', 
 'Y' , 'N' , 1 ,  'Allied.UniTrac.Property' , P.ID , 'PEND' , 'N'
FROM PROPERTY P
WHERE P.ID IN (SELECT ID FROM UniTracHDStorage..INC0341969_P)






