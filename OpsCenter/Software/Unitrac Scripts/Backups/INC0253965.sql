USE UniTrac


--Finding WI via Number
SELECT CONTENT_XML.value('(/Content/Lender/Code)[1]', 'varchar (50)') Lender, WD.NAME_TX [Definition], 
WQ.NAME_TX [Queue], WI.*
FROM  WORK_ITEM WI
INNER JOIN dbo.WORKFLOW_DEFINITION WD ON WD.ID = WI.WORKFLOW_DEFINITION_ID
INNER JOIN dbo.WORK_QUEUE WQ ON WQ.ID = WI.CURRENT_QUEUE_ID
WHERE WI.ID IN (XXXXXXXX, XXXXXXXX)



--Finding WI via CODE_TX
----REPLACE #### WITH THE THE Lender ID
SELECT CONTENT_XML.value('(/Content/Lender/Code)[1]', 'varchar (50)') Lender, WD.NAME_TX [Definition], 
WQ.NAME_TX [Queue], WI.*
FROM  WORK_ITEM WI
INNER JOIN dbo.WORKFLOW_DEFINITION WD ON WD.ID = WI.WORKFLOW_DEFINITION_ID
INNER JOIN dbo.WORK_QUEUE WQ ON WQ.ID = WI.CURRENT_QUEUE_ID
WHERE WI.CONTENT_XML.value('(/Content/Lender/Code)[1]', 'varchar (50)') IN ('2250')
AND WI.STATUS_CD NOT IN ('Complete' ,'Withdrawn' ,'ImportCompleted')
AND WI.WORKFLOW_DEFINITION_ID = '11'

UPDATE dbo.MESSAGE
SET RECEIVED_STATUS_CD = 'RCVD', PROCESSED_IN = 'N',UPDATE_DT = GETDATE(), UPDATE_USER_TX = 'INC0253965'
--SELECT PROCESSED_IN, * FROM dbo.MESSAGE
WHERE ID = '6296015'

SELECT * FROM dbo.TRADING_PARTNER_LOG
WHERE MESSAGE_ID = '6296015'

--Process Log ID


SELECT * FROM dbo.PROCESS_LOG_ITEM
WHERE PROCESS_LOG_ID = 'XXXXXX'



SELECT * FROM dbo.WORK_QUEUE W
JOIN dbo.WORK_QUEUE_WORK_ITEM_RELATE WW ON WW.WORK_QUEUE_ID = W.ID
WHERE W.WORKFLOW_DEFINITION_ID = '9'


USE UniTrac

SELECT * FROM dbo.WORK_ITEM
WHERE ID = '34751985'

SELECT * FROM dbo.MESSAGE
WHERE ID = '6297526'



SELECT * FROM dbo.TRADING_PARTNER_LOG
WHERE MESSAGE_ID = '6297526'